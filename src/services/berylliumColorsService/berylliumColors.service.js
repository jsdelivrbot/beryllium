(function() {

/**
 * berylliumColors service
 * 
 * Service provides utilities for working with colors in Cesium. The following things
 * are provided:
 * 
 * berylliumColors.MISSING_VALUE_COLOR: default color to use for missing data points
 * 
 * berylliumColors.interpolate( x, min, max, colors ): Interpolate a value to a color,
 * 		based on a color scheme.
 * 		x: the value to be interpolated
 * 		min, max: the range that 'x' lives inside. If 'x<=min' it will be interpolated to
 * 			the first color in the color range. If 'x>=max' it will be interpolated to
 * 			the last color in the range. Otherwise, it will be linearly interpolated between
 * 			the first and last colors based on how it falls between min and max
 * 		colors: the color range to use. Should probably be a reference to a color range from
 * 			berylliumColors, such as berylliumColors.DEFAULT
 * 
 * berylliumColors.INFERNO: A 'perceptually uniform' colormap from black to yellow through
 * 		purple and red. Copied from Matplotlib's 'inferno' colormap:
 * 		http://matplotlib.org/examples/color/colormaps_reference.html
 * 
 * berylliumColors.PLASMA: A 'perceptually uniform' colormap from purple to yellow through
 * 		red. Similar to INFERNO, but doesn't use black as the lowest color (can be hard to
 * 		see if your background is space). Copied from Matplotlib's 'plasma' colormap:
 * 		http://matplotlib.org/examples/color/colormaps_reference.html
 * 
 * berylliumColors.DEFAULT: The default colormap for berylliumColors. Currently set to PLASMA
 * 
 * Instructions for ripping colormaps from matplotlib. Requires Python and a recent enough
 * version of Matplotlib to have the desired colormap:
 * 
 * >>> import matplotlib.pyplot as plt
 * >>> import json
 * >>> cmap = plt.get_cmap('plasma')
 * >>> colors = [cmap(x) for x in range(0,256)]
 * >>> json.dumps( colors )
 */

var INFERNO = [
	[0.001462, 0.000466, 0.013866, 1.0],
	[0.0022669999999999999, 0.0012700000000000001, 0.01857, 1.0],
	[0.0032989999999999998, 0.0022490000000000001, 0.024239, 1.0],
	[0.0045469999999999998, 0.003392, 0.030908999999999999, 1.0],
	[0.0060060000000000001, 0.004692, 0.038558000000000002, 1.0],
	[0.0076759999999999997, 0.006136, 0.046836000000000003, 1.0],
	[0.0095610000000000001, 0.0077130000000000002, 0.055142999999999998, 1.0],
	[0.011663, 0.009417, 0.063460000000000003, 1.0],
	[0.013995, 0.011225000000000001, 0.071861999999999995, 1.0],
	[0.016560999999999999, 0.013136, 0.080282000000000006, 1.0],
	[0.019373000000000001, 0.015133000000000001, 0.088766999999999999, 1.0],
	[0.022447000000000002, 0.017198999999999999, 0.097326999999999997, 1.0],
	[0.025793, 0.019331000000000001, 0.10593, 1.0],
	[0.029432, 0.021503000000000001, 0.114621, 1.0],
	[0.033384999999999998, 0.023702000000000001, 0.12339700000000001, 1.0],
	[0.037668, 0.025921, 0.13223199999999999, 1.0],
	[0.042252999999999999, 0.028139000000000001, 0.14114099999999999, 1.0],
	[0.046914999999999998, 0.030324, 0.15016399999999999, 1.0],
	[0.051644000000000002, 0.032474000000000003, 0.15925400000000001, 1.0],
	[0.056448999999999999, 0.034569000000000003, 0.16841400000000001, 1.0],
	[0.061339999999999999, 0.036589999999999998, 0.17764199999999999, 1.0],
	[0.066331000000000001, 0.038503999999999997, 0.18696199999999999, 1.0],
	[0.071429000000000006, 0.040294000000000003, 0.196354, 1.0],
	[0.076636999999999997, 0.041904999999999998, 0.20579900000000001, 1.0],
	[0.081961999999999993, 0.043327999999999998, 0.21528900000000001, 1.0],
	[0.087411000000000003, 0.044555999999999998, 0.22481300000000001, 1.0],
	[0.092990000000000003, 0.045582999999999999, 0.23435800000000001, 1.0],
	[0.098701999999999998, 0.046401999999999999, 0.24390400000000001, 1.0],
	[0.10455100000000001, 0.047008000000000001, 0.25342999999999999, 1.0],
	[0.110536, 0.047398999999999997, 0.26291199999999998, 1.0],
	[0.116656, 0.047573999999999998, 0.27232099999999998, 1.0],
	[0.122908, 0.047536000000000002, 0.28162399999999999, 1.0],
	[0.12928500000000001, 0.047293000000000002, 0.29078799999999999, 1.0],
	[0.13577800000000001, 0.046856000000000002, 0.29977599999999999, 1.0],
	[0.142378, 0.046241999999999998, 0.30855300000000002, 1.0],
	[0.14907300000000001, 0.045468000000000001, 0.31708500000000001, 1.0],
	[0.15584999999999999, 0.044559000000000001, 0.32533800000000002, 1.0],
	[0.162689, 0.043554000000000002, 0.33327699999999999, 1.0],
	[0.169575, 0.042488999999999999, 0.34087400000000001, 1.0],
	[0.17649300000000001, 0.041402000000000001, 0.348111, 1.0],
	[0.18342900000000001, 0.040328999999999997, 0.35497099999999998, 1.0],
	[0.19036700000000001, 0.039308999999999997, 0.36144700000000002, 1.0],
	[0.197297, 0.038399999999999997, 0.367535, 1.0],
	[0.204209, 0.037631999999999999, 0.37323800000000001, 1.0],
	[0.211095, 0.03703, 0.37856299999999998, 1.0],
	[0.217949, 0.036615000000000002, 0.38352199999999997, 1.0],
	[0.22476299999999999, 0.036405, 0.388129, 1.0],
	[0.23153799999999999, 0.036405, 0.39240000000000003, 1.0],
	[0.23827300000000001, 0.036621000000000001, 0.39635300000000001, 1.0],
	[0.24496699999999999, 0.037054999999999998, 0.400007, 1.0],
	[0.25162000000000001, 0.037705000000000002, 0.40337800000000001, 1.0],
	[0.25823400000000002, 0.038571000000000001, 0.40648499999999999, 1.0],
	[0.26480999999999999, 0.039647000000000002, 0.40934500000000001, 1.0],
	[0.271347, 0.040922, 0.41197600000000001, 1.0],
	[0.27784999999999999, 0.042353000000000002, 0.41439199999999998, 1.0],
	[0.28432099999999999, 0.043933, 0.41660799999999998, 1.0],
	[0.29076299999999999, 0.045643999999999997, 0.41863699999999998, 1.0],
	[0.297178, 0.047469999999999998, 0.420491, 1.0],
	[0.303568, 0.049396000000000002, 0.422182, 1.0],
	[0.30993500000000002, 0.051407000000000001, 0.42372100000000001, 1.0],
	[0.31628200000000001, 0.053490000000000003, 0.42511599999999999, 1.0],
	[0.32261000000000001, 0.055634000000000003, 0.42637700000000001, 1.0],
	[0.32892100000000002, 0.057827000000000003, 0.42751099999999997, 1.0],
	[0.33521699999999999, 0.060060000000000002, 0.42852400000000002, 1.0],
	[0.34150000000000003, 0.062324999999999998, 0.429425, 1.0],
	[0.347771, 0.064616000000000007, 0.43021700000000002, 1.0],
	[0.35403200000000001, 0.066924999999999998, 0.43090600000000001, 1.0],
	[0.36028399999999999, 0.069247000000000003, 0.43149700000000002, 1.0],
	[0.36652899999999999, 0.071579000000000004, 0.43199399999999999, 1.0],
	[0.37276799999999999, 0.073914999999999995, 0.43240000000000001, 1.0],
	[0.37900099999999998, 0.076253000000000001, 0.43271900000000002, 1.0],
	[0.38522800000000001, 0.078590999999999994, 0.43295499999999998, 1.0],
	[0.391453, 0.080926999999999999, 0.43310900000000002, 1.0],
	[0.39767400000000003, 0.083256999999999998, 0.43318299999999998, 1.0],
	[0.40389399999999998, 0.085580000000000003, 0.43317899999999998, 1.0],
	[0.41011300000000001, 0.087896000000000002, 0.43309799999999998, 1.0],
	[0.41633100000000001, 0.090203000000000005, 0.43294300000000002, 1.0],
	[0.42254900000000001, 0.092501, 0.43271399999999999, 1.0],
	[0.42876799999999998, 0.094789999999999999, 0.43241200000000002, 1.0],
	[0.43498700000000001, 0.097069000000000003, 0.43203900000000001, 1.0],
	[0.44120700000000002, 0.099337999999999996, 0.43159399999999998, 1.0],
	[0.44742799999999999, 0.10159700000000001, 0.43108000000000002, 1.0],
	[0.45365100000000003, 0.103848, 0.43049799999999999, 1.0],
	[0.45987499999999998, 0.106089, 0.42984600000000001, 1.0],
	[0.46610000000000001, 0.108322, 0.42912499999999998, 1.0],
	[0.47232800000000003, 0.11054700000000001, 0.42833399999999999, 1.0],
	[0.47855799999999998, 0.112764, 0.42747499999999999, 1.0],
	[0.48478900000000003, 0.11497400000000001, 0.42654799999999998, 1.0],
	[0.49102200000000001, 0.11717900000000001, 0.42555199999999999, 1.0],
	[0.497257, 0.119379, 0.42448799999999998, 1.0],
	[0.50349299999999997, 0.121575, 0.42335600000000001, 1.0],
	[0.50973000000000002, 0.123769, 0.42215599999999998, 1.0],
	[0.51596699999999995, 0.12595999999999999, 0.42088700000000001, 1.0],
	[0.52220599999999995, 0.12814999999999999, 0.41954900000000001, 1.0],
	[0.52844400000000002, 0.13034100000000001, 0.41814200000000001, 1.0],
	[0.53468300000000002, 0.13253400000000001, 0.41666700000000001, 1.0],
	[0.54091999999999996, 0.13472899999999999, 0.41512300000000002, 1.0],
	[0.547157, 0.136929, 0.41351100000000002, 1.0],
	[0.553392, 0.13913400000000001, 0.411829, 1.0],
	[0.55962400000000001, 0.141346, 0.410078, 1.0],
	[0.56585399999999997, 0.143567, 0.40825800000000001, 1.0],
	[0.57208099999999995, 0.14579700000000001, 0.40636899999999998, 1.0],
	[0.57830400000000004, 0.148039, 0.40441100000000002, 1.0],
	[0.58452099999999996, 0.15029400000000001, 0.40238499999999999, 1.0],
	[0.59073399999999998, 0.152563, 0.40028999999999998, 1.0],
	[0.59694000000000003, 0.15484800000000001, 0.39812500000000001, 1.0],
	[0.60313899999999998, 0.15715100000000001, 0.39589099999999999, 1.0],
	[0.60933000000000004, 0.159474, 0.39358900000000002, 1.0],
	[0.61551299999999998, 0.16181699999999999, 0.39121899999999998, 1.0],
	[0.62168500000000004, 0.164184, 0.38878099999999999, 1.0],
	[0.62784700000000004, 0.166575, 0.38627600000000001, 1.0],
	[0.63399799999999995, 0.168992, 0.38370399999999999, 1.0],
	[0.64013500000000001, 0.17143800000000001, 0.38106499999999999, 1.0],
	[0.64625999999999995, 0.17391400000000001, 0.378359, 1.0],
	[0.65236899999999998, 0.17642099999999999, 0.37558599999999998, 1.0],
	[0.65846300000000002, 0.17896200000000001, 0.37274800000000002, 1.0],
	[0.66454000000000002, 0.18153900000000001, 0.36984600000000001, 1.0],
	[0.67059899999999995, 0.18415300000000001, 0.36687900000000001, 1.0],
	[0.67663799999999996, 0.186807, 0.36384899999999998, 1.0],
	[0.68265600000000004, 0.189501, 0.36075699999999999, 1.0],
	[0.68865299999999996, 0.19223899999999999, 0.357603, 1.0],
	[0.69462699999999999, 0.195021, 0.35438799999999998, 1.0],
	[0.70057599999999998, 0.197851, 0.35111300000000001, 1.0],
	[0.70650000000000002, 0.20072799999999999, 0.347777, 1.0],
	[0.71239600000000003, 0.203656, 0.34438299999999999, 1.0],
	[0.71826400000000001, 0.20663599999999999, 0.34093099999999998, 1.0],
	[0.72410300000000005, 0.20967, 0.337424, 1.0],
	[0.72990900000000003, 0.212759, 0.33386100000000002, 1.0],
	[0.73568299999999998, 0.21590599999999999, 0.33024500000000001, 1.0],
	[0.74142300000000005, 0.219112, 0.32657599999999998, 1.0],
	[0.74712699999999999, 0.22237799999999999, 0.32285599999999998, 1.0],
	[0.75279399999999996, 0.22570599999999999, 0.31908500000000001, 1.0],
	[0.75842200000000004, 0.229097, 0.31526599999999999, 1.0],
	[0.76400999999999997, 0.23255400000000001, 0.31139899999999998, 1.0],
	[0.76955600000000002, 0.23607700000000001, 0.30748500000000001, 1.0],
	[0.77505900000000005, 0.23966699999999999, 0.30352600000000002, 1.0],
	[0.78051700000000002, 0.24332699999999999, 0.29952299999999998, 1.0],
	[0.78592899999999999, 0.247056, 0.29547699999999999, 1.0],
	[0.79129300000000002, 0.25085600000000002, 0.29138999999999998, 1.0],
	[0.79660699999999995, 0.25472800000000001, 0.28726400000000002, 1.0],
	[0.801871, 0.25867400000000002, 0.28309899999999999, 1.0],
	[0.80708199999999997, 0.26269199999999998, 0.27889799999999998, 1.0],
	[0.81223900000000004, 0.26678600000000002, 0.27466099999999999, 1.0],
	[0.81734099999999998, 0.27095399999999997, 0.27039000000000002, 1.0],
	[0.82238599999999995, 0.27519700000000002, 0.26608500000000002, 1.0],
	[0.827372, 0.27951700000000002, 0.26174999999999998, 1.0],
	[0.83229900000000001, 0.28391300000000003, 0.25738299999999997, 1.0],
	[0.83716500000000005, 0.288385, 0.25298799999999999, 1.0],
	[0.84196899999999997, 0.292933, 0.24856400000000001, 1.0],
	[0.84670900000000004, 0.29755900000000002, 0.244113, 1.0],
	[0.85138400000000003, 0.30225999999999997, 0.23963599999999999, 1.0],
	[0.85599199999999998, 0.30703799999999998, 0.23513300000000001, 1.0],
	[0.86053299999999999, 0.311892, 0.23060600000000001, 1.0],
	[0.86500600000000005, 0.31682199999999999, 0.22605500000000001, 1.0],
	[0.86940899999999999, 0.32182699999999997, 0.22148200000000001, 1.0],
	[0.87374099999999999, 0.32690599999999997, 0.216886, 1.0],
	[0.87800100000000003, 0.33206000000000002, 0.21226800000000001, 1.0],
	[0.88218799999999997, 0.337287, 0.20762800000000001, 1.0],
	[0.88630200000000003, 0.342586, 0.20296800000000001, 1.0],
	[0.89034100000000005, 0.34795700000000002, 0.19828599999999999, 1.0],
	[0.89430500000000002, 0.35339900000000002, 0.19358400000000001, 1.0],
	[0.89819199999999999, 0.35891099999999998, 0.18886, 1.0],
	[0.902003, 0.36449199999999998, 0.184116, 1.0],
	[0.90573499999999996, 0.37014000000000002, 0.17935000000000001, 1.0],
	[0.90939000000000003, 0.37585600000000002, 0.174563, 1.0],
	[0.91296600000000006, 0.38163599999999998, 0.16975499999999999, 1.0],
	[0.916462, 0.38748100000000002, 0.16492399999999999, 1.0],
	[0.919879, 0.39338899999999999, 0.16006999999999999, 1.0],
	[0.92321500000000001, 0.39935900000000002, 0.155193, 1.0],
	[0.92647000000000002, 0.405389, 0.15029200000000001, 1.0],
	[0.92964400000000003, 0.41147899999999998, 0.145367, 1.0],
	[0.93273700000000004, 0.41762700000000003, 0.14041699999999999, 1.0],
	[0.935747, 0.42383100000000001, 0.13544, 1.0],
	[0.93867500000000004, 0.430091, 0.130438, 1.0],
	[0.94152100000000005, 0.43640499999999999, 0.12540899999999999, 1.0],
	[0.94428500000000004, 0.442772, 0.120354, 1.0],
	[0.94696499999999995, 0.44919100000000001, 0.115272, 1.0],
	[0.94956200000000002, 0.45566000000000001, 0.110164, 1.0],
	[0.952075, 0.46217799999999998, 0.105031, 1.0],
	[0.95450599999999997, 0.46874399999999999, 0.099874000000000004, 1.0],
	[0.95685200000000004, 0.475356, 0.094695000000000001, 1.0],
	[0.95911400000000002, 0.482014, 0.089498999999999995, 1.0],
	[0.96129299999999995, 0.48871599999999998, 0.084289000000000003, 1.0],
	[0.96338699999999999, 0.49546200000000001, 0.079073000000000004, 1.0],
	[0.96539699999999995, 0.50224899999999995, 0.073858999999999994, 1.0],
	[0.96732200000000002, 0.50907800000000003, 0.068658999999999998, 1.0],
	[0.969163, 0.51594600000000002, 0.063488000000000003, 1.0],
	[0.97091899999999998, 0.52285300000000001, 0.058367000000000002, 1.0],
	[0.97258999999999995, 0.52979799999999999, 0.053324000000000003, 1.0],
	[0.97417600000000004, 0.53678000000000003, 0.048391999999999998, 1.0],
	[0.97567700000000002, 0.543798, 0.043617999999999997, 1.0],
	[0.97709199999999996, 0.55084999999999995, 0.039050000000000001, 1.0],
	[0.97842200000000001, 0.55793700000000002, 0.034930999999999997, 1.0],
	[0.97966600000000004, 0.56505700000000003, 0.031408999999999999, 1.0],
	[0.98082400000000003, 0.57220899999999997, 0.028507999999999999, 1.0],
	[0.98189499999999996, 0.57939200000000002, 0.026249999999999999, 1.0],
	[0.982881, 0.58660599999999996, 0.024660999999999999, 1.0],
	[0.98377899999999996, 0.59384899999999996, 0.023769999999999999, 1.0],
	[0.98459099999999999, 0.60112200000000005, 0.023605999999999999, 1.0],
	[0.98531500000000005, 0.60842200000000002, 0.024202000000000001, 1.0],
	[0.98595200000000005, 0.61575000000000002, 0.025592, 1.0],
	[0.98650199999999999, 0.62310500000000002, 0.027813999999999998, 1.0],
	[0.98696399999999995, 0.63048499999999996, 0.030908000000000001, 1.0],
	[0.98733700000000002, 0.63788999999999996, 0.034916000000000003, 1.0],
	[0.987622, 0.64532, 0.039885999999999998, 1.0],
	[0.987819, 0.65277300000000005, 0.045581000000000003, 1.0],
	[0.98792599999999997, 0.66025, 0.051749999999999997, 1.0],
	[0.98794499999999996, 0.66774800000000001, 0.058328999999999999, 1.0],
	[0.98787400000000003, 0.67526699999999995, 0.065256999999999996, 1.0],
	[0.98771399999999998, 0.68280700000000005, 0.072488999999999998, 1.0],
	[0.98746400000000001, 0.69036600000000004, 0.079990000000000006, 1.0],
	[0.987124, 0.69794400000000001, 0.087731000000000003, 1.0],
	[0.98669399999999996, 0.70553999999999994, 0.095694000000000001, 1.0],
	[0.98617500000000002, 0.71315300000000004, 0.103863, 1.0],
	[0.98556600000000005, 0.72078200000000003, 0.112229, 1.0],
	[0.98486499999999999, 0.72842700000000005, 0.120785, 1.0],
	[0.98407500000000003, 0.73608700000000005, 0.129527, 1.0],
	[0.98319599999999996, 0.74375800000000003, 0.13845299999999999, 1.0],
	[0.98222799999999999, 0.75144200000000005, 0.147565, 1.0],
	[0.98117299999999996, 0.759135, 0.156863, 1.0],
	[0.98003200000000001, 0.76683699999999999, 0.166353, 1.0],
	[0.97880599999999995, 0.77454500000000004, 0.176037, 1.0],
	[0.97749699999999995, 0.78225800000000001, 0.185923, 1.0],
	[0.97610799999999998, 0.78997399999999995, 0.196018, 1.0],
	[0.974638, 0.79769199999999996, 0.20633199999999999, 1.0],
	[0.97308799999999995, 0.80540900000000004, 0.21687699999999999, 1.0],
	[0.971468, 0.81312200000000001, 0.227658, 1.0],
	[0.96978299999999995, 0.82082500000000003, 0.23868600000000001, 1.0],
	[0.96804100000000004, 0.828515, 0.249972, 1.0],
	[0.96624299999999996, 0.83619100000000002, 0.26153399999999999, 1.0],
	[0.96439399999999997, 0.84384800000000004, 0.273391, 1.0],
	[0.96251699999999996, 0.85147600000000001, 0.28554600000000002, 1.0],
	[0.96062599999999998, 0.85906899999999997, 0.29801, 1.0],
	[0.95872000000000002, 0.86662399999999995, 0.31081999999999999, 1.0],
	[0.95683399999999996, 0.87412900000000004, 0.32397399999999998, 1.0],
	[0.95499699999999998, 0.88156900000000005, 0.33747500000000002, 1.0],
	[0.95321500000000003, 0.88894200000000001, 0.35136899999999999, 1.0],
	[0.951546, 0.89622599999999997, 0.36562699999999998, 1.0],
	[0.95001800000000003, 0.90340900000000002, 0.38027100000000003, 1.0],
	[0.94868300000000005, 0.91047299999999998, 0.395289, 1.0],
	[0.94759400000000005, 0.91739899999999996, 0.410665, 1.0],
	[0.94680900000000001, 0.92416799999999999, 0.426373, 1.0],
	[0.94639200000000001, 0.93076099999999995, 0.44236700000000001, 1.0],
	[0.94640299999999999, 0.93715899999999996, 0.458592, 1.0],
	[0.94690300000000005, 0.94334799999999996, 0.47497, 1.0],
	[0.94793700000000003, 0.949318, 0.49142599999999997, 1.0],
	[0.94954499999999997, 0.955063, 0.50785999999999998, 1.0],
	[0.95174000000000003, 0.96058699999999997, 0.52420299999999997, 1.0],
	[0.95452899999999996, 0.96589599999999998, 0.54036099999999998, 1.0],
	[0.95789599999999997, 0.97100299999999995, 0.55627499999999996, 1.0],
	[0.961812, 0.97592400000000001, 0.57192500000000002, 1.0],
	[0.96624900000000002, 0.98067800000000005, 0.58720600000000001, 1.0],
	[0.97116199999999997, 0.98528199999999999, 0.60215399999999997, 1.0],
	[0.97651100000000002, 0.98975299999999999, 0.61675999999999997, 1.0],
	[0.98225700000000005, 0.99410900000000002, 0.63101700000000005, 1.0],
	[0.98836199999999996, 0.99836400000000003, 0.64492400000000005, 1.0]
];

var PLASMA = [
	[0.050382999999999997, 0.029803, 0.52797499999999997, 1.0],
	[0.063535999999999995, 0.028426, 0.53312400000000004, 1.0],
	[0.075353000000000003, 0.027206000000000001, 0.53800700000000001, 1.0],
	[0.086221999999999993, 0.026124999999999999, 0.54265799999999997, 1.0],
	[0.096379000000000006, 0.025165, 0.54710300000000001, 1.0],
	[0.10598, 0.024309000000000001, 0.55136799999999997, 1.0],
	[0.115124, 0.023556000000000001, 0.55546799999999996, 1.0],
	[0.123903, 0.022877999999999999, 0.559423, 1.0],
	[0.132381, 0.022258, 0.56325000000000003, 1.0],
	[0.14060300000000001, 0.021687000000000001, 0.56695899999999999, 1.0],
	[0.14860699999999999, 0.021153999999999999, 0.57056200000000001, 1.0],
	[0.156421, 0.020650999999999999, 0.57406500000000005, 1.0],
	[0.16406999999999999, 0.020171000000000001, 0.57747800000000005, 1.0],
	[0.171574, 0.019706000000000001, 0.58080600000000004, 1.0],
	[0.17895, 0.019251999999999998, 0.58405399999999996, 1.0],
	[0.18621299999999999, 0.018803, 0.58722799999999997, 1.0],
	[0.19337399999999999, 0.018353999999999999, 0.59033000000000002, 1.0],
	[0.20044500000000001, 0.017902000000000001, 0.593364, 1.0],
	[0.20743500000000001, 0.017441999999999999, 0.596333, 1.0],
	[0.21435000000000001, 0.016972999999999999, 0.59923899999999997, 1.0],
	[0.221197, 0.016497000000000001, 0.60208300000000003, 1.0],
	[0.22798299999999999, 0.016007, 0.60486700000000004, 1.0],
	[0.23471500000000001, 0.015502, 0.60759200000000002, 1.0],
	[0.241396, 0.014978999999999999, 0.610259, 1.0],
	[0.248032, 0.014439, 0.61286799999999997, 1.0],
	[0.25462699999999999, 0.013882, 0.61541900000000005, 1.0],
	[0.261183, 0.013308, 0.61791099999999999, 1.0],
	[0.26770300000000002, 0.012716, 0.62034599999999995, 1.0],
	[0.27419100000000002, 0.012109, 0.622722, 1.0],
	[0.28064800000000001, 0.011488, 0.62503799999999998, 1.0],
	[0.287076, 0.010855, 0.62729500000000005, 1.0],
	[0.29347800000000002, 0.010213, 0.62948999999999999, 1.0],
	[0.29985499999999998, 0.0095610000000000001, 0.63162399999999996, 1.0],
	[0.30620999999999998, 0.0089020000000000002, 0.63369399999999998, 1.0],
	[0.31254300000000002, 0.0082389999999999998, 0.63570000000000004, 1.0],
	[0.31885599999999997, 0.0075760000000000003, 0.63763999999999998, 1.0],
	[0.32514999999999999, 0.0069150000000000001, 0.63951199999999997, 1.0],
	[0.331426, 0.0062610000000000001, 0.641316, 1.0],
	[0.33768300000000001, 0.0056179999999999997, 0.64304899999999998, 1.0],
	[0.34392499999999998, 0.0049909999999999998, 0.64471000000000001, 1.0],
	[0.35015000000000002, 0.0043819999999999996, 0.64629800000000004, 1.0],
	[0.35635899999999998, 0.0037980000000000002, 0.64781, 1.0],
	[0.36255300000000001, 0.0032429999999999998, 0.64924499999999996, 1.0],
	[0.36873299999999998, 0.0027239999999999999, 0.65060099999999998, 1.0],
	[0.37489699999999998, 0.002245, 0.65187600000000001, 1.0],
	[0.38104700000000002, 0.0018140000000000001, 0.65306799999999998, 1.0],
	[0.387183, 0.0014339999999999999, 0.65417700000000001, 1.0],
	[0.39330399999999999, 0.001114, 0.65519899999999998, 1.0],
	[0.39941100000000002, 0.00085899999999999995, 0.65613299999999997, 1.0],
	[0.405503, 0.000678, 0.65697700000000003, 1.0],
	[0.41158, 0.00057700000000000004, 0.65773000000000004, 1.0],
	[0.41764200000000001, 0.00056400000000000005, 0.65839000000000003, 1.0],
	[0.42368899999999998, 0.00064599999999999998, 0.65895599999999999, 1.0],
	[0.42971900000000002, 0.00083100000000000003, 0.65942500000000004, 1.0],
	[0.43573400000000001, 0.001127, 0.65979699999999997, 1.0],
	[0.44173200000000001, 0.0015399999999999999, 0.66006900000000002, 1.0],
	[0.447714, 0.0020799999999999998, 0.66024000000000005, 1.0],
	[0.453677, 0.0027550000000000001, 0.66030999999999995, 1.0],
	[0.459623, 0.0035739999999999999, 0.660277, 1.0],
	[0.46555000000000002, 0.0045450000000000004, 0.66013900000000003, 1.0],
	[0.47145700000000001, 0.0056779999999999999, 0.65989699999999996, 1.0],
	[0.47734399999999999, 0.0069800000000000001, 0.65954900000000005, 1.0],
	[0.48320999999999997, 0.0084600000000000005, 0.65909499999999999, 1.0],
	[0.48905500000000002, 0.010127000000000001, 0.65853399999999995, 1.0],
	[0.49487700000000001, 0.011990000000000001, 0.65786500000000003, 1.0],
	[0.50067799999999996, 0.014055, 0.65708800000000001, 1.0],
	[0.50645399999999996, 0.016333, 0.65620199999999995, 1.0],
	[0.51220600000000005, 0.018832999999999999, 0.65520900000000004, 1.0],
	[0.51793299999999998, 0.021562999999999999, 0.65410900000000005, 1.0],
	[0.52363300000000002, 0.024532000000000002, 0.65290099999999995, 1.0],
	[0.52930600000000005, 0.027747000000000001, 0.651586, 1.0],
	[0.53495199999999998, 0.031217000000000002, 0.65016499999999999, 1.0],
	[0.54056999999999999, 0.034950000000000002, 0.64863999999999999, 1.0],
	[0.546157, 0.038954000000000003, 0.64700999999999997, 1.0],
	[0.55171499999999996, 0.043136000000000001, 0.64527699999999999, 1.0],
	[0.55724300000000004, 0.047330999999999998, 0.64344299999999999, 1.0],
	[0.56273799999999996, 0.051545000000000001, 0.641509, 1.0],
	[0.56820099999999996, 0.055778000000000001, 0.63947699999999996, 1.0],
	[0.57363200000000003, 0.060027999999999998, 0.63734900000000005, 1.0],
	[0.57902900000000002, 0.064296000000000006, 0.63512599999999997, 1.0],
	[0.58439099999999999, 0.068579000000000001, 0.63281200000000004, 1.0],
	[0.58971899999999999, 0.072877999999999998, 0.63040799999999997, 1.0],
	[0.59501099999999996, 0.077189999999999995, 0.62791699999999995, 1.0],
	[0.60026599999999997, 0.081516000000000005, 0.62534199999999995, 1.0],
	[0.60548500000000005, 0.085854, 0.62268599999999996, 1.0],
	[0.61066699999999996, 0.090204000000000006, 0.61995100000000003, 1.0],
	[0.61581200000000003, 0.094563999999999995, 0.61714000000000002, 1.0],
	[0.620919, 0.098933999999999994, 0.61425700000000005, 1.0],
	[0.62598699999999996, 0.103312, 0.61130499999999999, 1.0],
	[0.63101700000000005, 0.107699, 0.60828700000000002, 1.0],
	[0.63600800000000002, 0.112092, 0.60520499999999999, 1.0],
	[0.64095899999999995, 0.116492, 0.60206499999999996, 1.0],
	[0.645872, 0.12089800000000001, 0.59886700000000004, 1.0],
	[0.65074600000000005, 0.125309, 0.59561699999999995, 1.0],
	[0.65558000000000005, 0.12972500000000001, 0.59231699999999998, 1.0],
	[0.66037400000000002, 0.13414400000000001, 0.58897100000000002, 1.0],
	[0.66512899999999997, 0.13856599999999999, 0.58558200000000005, 1.0],
	[0.66984500000000002, 0.14299200000000001, 0.58215399999999995, 1.0],
	[0.67452199999999995, 0.14741899999999999, 0.57868799999999998, 1.0],
	[0.67915999999999999, 0.15184800000000001, 0.57518899999999995, 1.0],
	[0.68375799999999998, 0.156278, 0.57165999999999995, 1.0],
	[0.68831799999999999, 0.16070899999999999, 0.56810300000000002, 1.0],
	[0.69284000000000001, 0.16514100000000001, 0.56452199999999997, 1.0],
	[0.69732400000000005, 0.169573, 0.56091899999999995, 1.0],
	[0.70176899999999998, 0.17400499999999999, 0.55729600000000001, 1.0],
	[0.70617799999999997, 0.17843700000000001, 0.55365699999999995, 1.0],
	[0.71054899999999999, 0.182868, 0.55000400000000005, 1.0],
	[0.71488300000000005, 0.18729899999999999, 0.54633799999999999, 1.0],
	[0.71918099999999996, 0.19172900000000001, 0.54266300000000001, 1.0],
	[0.72344399999999998, 0.196158, 0.53898100000000004, 1.0],
	[0.72767000000000004, 0.20058599999999999, 0.53529300000000002, 1.0],
	[0.73186200000000001, 0.205013, 0.53160099999999999, 1.0],
	[0.73601899999999998, 0.20943899999999999, 0.52790800000000004, 1.0],
	[0.740143, 0.213864, 0.52421600000000002, 1.0],
	[0.744232, 0.21828800000000001, 0.52052399999999999, 1.0],
	[0.74828899999999998, 0.22271099999999999, 0.51683400000000002, 1.0],
	[0.75231199999999998, 0.227133, 0.51314899999999997, 1.0],
	[0.75630399999999998, 0.23155500000000001, 0.50946800000000003, 1.0],
	[0.76026400000000005, 0.23597599999999999, 0.50579399999999997, 1.0],
	[0.76419300000000001, 0.240396, 0.50212599999999996, 1.0],
	[0.76809000000000005, 0.24481700000000001, 0.49846499999999999, 1.0],
	[0.77195800000000003, 0.24923699999999999, 0.494813, 1.0],
	[0.77579600000000004, 0.25365799999999999, 0.49117100000000002, 1.0],
	[0.77960399999999996, 0.25807799999999997, 0.487539, 1.0],
	[0.78338300000000005, 0.26250000000000001, 0.48391800000000001, 1.0],
	[0.78713299999999997, 0.26692199999999999, 0.48030699999999998, 1.0],
	[0.79085499999999997, 0.271345, 0.47670600000000002, 1.0],
	[0.79454899999999995, 0.27577000000000002, 0.47311700000000001, 1.0],
	[0.79821600000000004, 0.28019699999999997, 0.46953800000000001, 1.0],
	[0.80185499999999998, 0.28462599999999999, 0.46597100000000002, 1.0],
	[0.80546700000000004, 0.28905700000000001, 0.46241500000000002, 1.0],
	[0.80905199999999999, 0.293491, 0.45887, 1.0],
	[0.812612, 0.29792800000000003, 0.45533800000000002, 1.0],
	[0.81614399999999998, 0.30236800000000003, 0.451816, 1.0],
	[0.81965100000000002, 0.30681199999999997, 0.44830599999999998, 1.0],
	[0.82313199999999997, 0.31126100000000001, 0.44480599999999998, 1.0],
	[0.82658799999999999, 0.31571399999999999, 0.44131599999999999, 1.0],
	[0.83001800000000003, 0.32017200000000001, 0.437836, 1.0],
	[0.833422, 0.32463500000000001, 0.43436599999999997, 1.0],
	[0.83680100000000002, 0.32910499999999998, 0.43090499999999998, 1.0],
	[0.84015499999999999, 0.33357999999999999, 0.42745499999999997, 1.0],
	[0.84348400000000001, 0.33806199999999997, 0.42401299999999997, 1.0],
	[0.84678799999999999, 0.34255099999999999, 0.42057899999999998, 1.0],
	[0.85006599999999999, 0.34704800000000002, 0.417153, 1.0],
	[0.85331900000000005, 0.351553, 0.41373399999999999, 1.0],
	[0.85654699999999995, 0.35606599999999999, 0.41032200000000002, 1.0],
	[0.85975000000000001, 0.36058800000000002, 0.40691699999999997, 1.0],
	[0.862927, 0.36511900000000003, 0.40351900000000002, 1.0],
	[0.86607800000000001, 0.36965999999999999, 0.40012599999999998, 1.0],
	[0.86920299999999995, 0.37421199999999999, 0.39673799999999998, 1.0],
	[0.87230300000000005, 0.378774, 0.39335500000000001, 1.0],
	[0.87537600000000004, 0.38334699999999999, 0.38997599999999999, 1.0],
	[0.87842299999999995, 0.387932, 0.3866, 1.0],
	[0.88144299999999998, 0.39252900000000002, 0.38322899999999999, 1.0],
	[0.884436, 0.39713900000000002, 0.37985999999999998, 1.0],
	[0.88740200000000002, 0.40176200000000001, 0.376494, 1.0],
	[0.89034000000000002, 0.40639799999999998, 0.37313000000000002, 1.0],
	[0.89324999999999999, 0.41104800000000002, 0.36976799999999999, 1.0],
	[0.89613100000000001, 0.41571200000000003, 0.36640699999999998, 1.0],
	[0.89898400000000001, 0.42039199999999999, 0.36304700000000001, 1.0],
	[0.90180700000000003, 0.42508699999999999, 0.35968800000000001, 1.0],
	[0.90460099999999999, 0.42979699999999998, 0.35632900000000001, 1.0],
	[0.90736499999999998, 0.43452400000000002, 0.35297000000000001, 1.0],
	[0.91009799999999996, 0.43926799999999999, 0.34960999999999998, 1.0],
	[0.91279999999999994, 0.44402900000000001, 0.34625099999999998, 1.0],
	[0.91547100000000003, 0.44880700000000001, 0.34288999999999997, 1.0],
	[0.91810899999999995, 0.45360299999999998, 0.33952900000000003, 1.0],
	[0.92071400000000003, 0.45841700000000002, 0.33616600000000002, 1.0],
	[0.92328699999999997, 0.46325100000000002, 0.33280100000000001, 1.0],
	[0.92582500000000001, 0.46810299999999999, 0.32943499999999998, 1.0],
	[0.92832899999999996, 0.47297499999999998, 0.326067, 1.0],
	[0.93079800000000001, 0.47786699999999999, 0.32269700000000001, 1.0],
	[0.93323199999999995, 0.48277999999999999, 0.31932500000000003, 1.0],
	[0.93562999999999996, 0.48771199999999998, 0.31595200000000001, 1.0],
	[0.93798999999999999, 0.49266700000000002, 0.31257499999999999, 1.0],
	[0.94031299999999995, 0.49764199999999997, 0.309197, 1.0],
	[0.94259800000000005, 0.50263899999999995, 0.30581599999999998, 1.0],
	[0.94484400000000002, 0.50765800000000005, 0.30243300000000001, 1.0],
	[0.94705099999999998, 0.51269900000000002, 0.29904900000000001, 1.0],
	[0.94921699999999998, 0.51776299999999997, 0.29566199999999998, 1.0],
	[0.95134399999999997, 0.52285000000000004, 0.29227500000000001, 1.0],
	[0.95342800000000005, 0.52795999999999998, 0.288883, 1.0],
	[0.95547000000000004, 0.53309300000000004, 0.28549000000000002, 1.0],
	[0.95746900000000001, 0.53825000000000001, 0.28209600000000001, 1.0],
	[0.95942400000000005, 0.543431, 0.27870099999999998, 1.0],
	[0.96133599999999997, 0.54863600000000001, 0.27530500000000002, 1.0],
	[0.96320300000000003, 0.55386500000000005, 0.27190900000000001, 1.0],
	[0.96502399999999999, 0.559118, 0.268513, 1.0],
	[0.96679800000000005, 0.56439600000000001, 0.26511800000000002, 1.0],
	[0.968526, 0.56969999999999998, 0.26172099999999998, 1.0],
	[0.97020499999999998, 0.57502799999999998, 0.25832500000000003, 1.0],
	[0.971835, 0.58038199999999995, 0.25493100000000002, 1.0],
	[0.97341599999999995, 0.58576099999999998, 0.25153999999999999, 1.0],
	[0.97494700000000001, 0.59116500000000005, 0.24815100000000001, 1.0],
	[0.97642799999999996, 0.59659499999999999, 0.24476700000000001, 1.0],
	[0.97785599999999995, 0.602051, 0.24138699999999999, 1.0],
	[0.97923300000000002, 0.60753199999999996, 0.238013, 1.0],
	[0.98055599999999998, 0.613039, 0.23464599999999999, 1.0],
	[0.98182599999999998, 0.61857200000000001, 0.23128699999999999, 1.0],
	[0.98304100000000005, 0.62413099999999999, 0.227937, 1.0],
	[0.98419900000000005, 0.629718, 0.22459499999999999, 1.0],
	[0.98530099999999998, 0.63532999999999995, 0.22126499999999999, 1.0],
	[0.98634500000000003, 0.64096900000000001, 0.217948, 1.0],
	[0.98733199999999999, 0.64663300000000001, 0.21464800000000001, 1.0],
	[0.98826000000000003, 0.65232500000000004, 0.211364, 1.0],
	[0.98912800000000001, 0.65804300000000004, 0.20810000000000001, 1.0],
	[0.98993500000000001, 0.66378700000000002, 0.20485900000000001, 1.0],
	[0.99068100000000003, 0.66955799999999999, 0.20164199999999999, 1.0],
	[0.99136500000000005, 0.67535500000000004, 0.19845299999999999, 1.0],
	[0.99198500000000001, 0.68117899999999998, 0.195295, 1.0],
	[0.99254100000000001, 0.68703000000000003, 0.19217000000000001, 1.0],
	[0.99303200000000003, 0.69290700000000005, 0.189084, 1.0],
	[0.99345600000000001, 0.69881000000000004, 0.18604100000000001, 1.0],
	[0.99381399999999998, 0.70474099999999995, 0.18304300000000001, 1.0],
	[0.99410299999999996, 0.71069800000000005, 0.18009700000000001, 1.0],
	[0.99432399999999999, 0.71668100000000001, 0.177208, 1.0],
	[0.99447399999999997, 0.72269099999999997, 0.17438100000000001, 1.0],
	[0.99455300000000002, 0.72872800000000004, 0.171622, 1.0],
	[0.99456100000000003, 0.73479099999999997, 0.168938, 1.0],
	[0.99449500000000002, 0.74087999999999998, 0.16633500000000001, 1.0],
	[0.99435499999999999, 0.74699499999999996, 0.16382099999999999, 1.0],
	[0.99414100000000005, 0.75313699999999995, 0.16140399999999999, 1.0],
	[0.99385100000000004, 0.75930399999999998, 0.15909200000000001, 1.0],
	[0.99348199999999998, 0.76549900000000004, 0.156891, 1.0],
	[0.99303300000000005, 0.77171999999999996, 0.154808, 1.0],
	[0.99250499999999997, 0.77796699999999996, 0.15285499999999999, 1.0],
	[0.99189700000000003, 0.78423900000000002, 0.15104200000000001, 1.0],
	[0.99120900000000001, 0.79053700000000005, 0.14937700000000001, 1.0],
	[0.99043899999999996, 0.79685899999999998, 0.14787, 1.0],
	[0.98958699999999999, 0.80320499999999995, 0.14652899999999999, 1.0],
	[0.98864799999999997, 0.80957900000000005, 0.14535699999999999, 1.0],
	[0.98762099999999997, 0.81597799999999998, 0.14436299999999999, 1.0],
	[0.98650899999999997, 0.82240100000000005, 0.14355699999999999, 1.0],
	[0.98531400000000002, 0.82884599999999997, 0.14294499999999999, 1.0],
	[0.98403099999999999, 0.83531500000000003, 0.14252799999999999, 1.0],
	[0.982653, 0.841812, 0.14230300000000001, 1.0],
	[0.98119000000000001, 0.848329, 0.14227899999999999, 1.0],
	[0.97964399999999996, 0.85486600000000001, 0.142453, 1.0],
	[0.97799499999999995, 0.86143199999999998, 0.14280799999999999, 1.0],
	[0.97626500000000005, 0.86801600000000001, 0.14335100000000001, 1.0],
	[0.97444299999999995, 0.87462200000000001, 0.14406099999999999, 1.0],
	[0.97253000000000001, 0.88124999999999998, 0.144923, 1.0],
	[0.97053299999999998, 0.88789600000000002, 0.14591899999999999, 1.0],
	[0.96844300000000005, 0.89456400000000003, 0.14701400000000001, 1.0],
	[0.96627099999999999, 0.90124899999999997, 0.14818000000000001, 1.0],
	[0.96402100000000002, 0.90795000000000003, 0.14937, 1.0],
	[0.96168100000000001, 0.91467200000000004, 0.15051999999999999, 1.0],
	[0.95927600000000002, 0.92140699999999998, 0.15156600000000001, 1.0],
	[0.95680799999999999, 0.92815199999999998, 0.15240899999999999, 1.0],
	[0.954287, 0.93490799999999996, 0.152921, 1.0],
	[0.95172599999999996, 0.94167100000000004, 0.15292500000000001, 1.0],
	[0.94915099999999997, 0.94843500000000003, 0.15217800000000001, 1.0],
	[0.94660200000000005, 0.95518999999999998, 0.15032799999999999, 1.0],
	[0.94415199999999999, 0.96191599999999999, 0.14686099999999999, 1.0],
	[0.94189599999999996, 0.96858999999999995, 0.140956, 1.0],
	[0.94001500000000004, 0.97515799999999997, 0.131326, 1.0]
];

var GRAY = Cesium.Color.GRAY.withAlpha(0.2);

function interpolate(x, min, max, colors) {

	if(
		typeof x === 'undefined' ||
		x === null ||
		isNaN(x)
	) {
		return GRAY;
	}

	// interpolate x to a value between 0 and 1
	// based on its position in the range min->max
	// (min interpolates to 0, max interpolates to 1)
	var val;
	if(x < min) { val = 0; }
	else if(x > max) { val = 1; }
	else {
		val = (x - min) / (max - min);
	}

	var index = val * (colors.length-1);
	var isInt = index % 1 === 0;
	if( isInt ) {
		var match = colors[index];
		return new Cesium.Color(
			match[0], // red
			match[1], // green
			match[2], // blue
			match[3]  // alpha
		);
	}

	var indexBefore = Math.floor(index);
	var indexAfter = Math.ceil(index);

	var valBefore = indexBefore / colors.length;
	var valAfter = indexAfter / colors.length;

	var breakpointBefore = colors[indexBefore];
	var breakpointAfter = colors[indexAfter];

	var red		= _interpolate(val, valBefore, valAfter, breakpointBefore[0], breakpointAfter[0]);
	var green	= _interpolate(val, valBefore, valAfter, breakpointBefore[1], breakpointAfter[1]);
	var blue	= _interpolate(val, valBefore, valAfter, breakpointBefore[2], breakpointAfter[2]);
	var alpha	= _interpolate(val, valBefore, valAfter, breakpointBefore[3], breakpointAfter[3]);

	return new Cesium.Color(red, green, blue, alpha);
}

function _interpolate(x, xMin, xMax, yMin, yMax) {
	var val = (x - xMin) / (xMax - xMin);
	return ((yMax - yMin) * val) + yMin;
}

function interpolateArray( array, colors ) {
	var min = Number.MAX_VALUE;
	var max = -Number.MAX_VALUE;
	for( var i=0; i<array.length; i++ ) {
		var val = array[i];
		if( val < min ) { min = val; }
		if( val > max ) { max = val; }
	}

	return array.map(function( val ) {
		return interpolate(val, min, max, colors);
	});
}

// Returns background gradient CSS given a color map (look above at INFERNO and PLASMA for format examples).
function colorMapToCSSBackground( colorMap ) {
	// Ignore undefined because it's possible for this method to be called before the color map is set
	if (typeof colorMap === "undefined") {
		return "";
	}

	var cssStringChunks = [];
	for (var i = 0; i < colorMap.length; i++) {
		cssPercentage = (i / colorMap.length) * 100;
		var r = Math.round(colorMap[i][0] * 255);
		var g = Math.round(colorMap[i][1] * 255);
		var b = Math.round(colorMap[i][2] * 255);

		cssStringChunks.push("rgba(" + r + ", " + g + ", " + b + ", " + colorMap[i][3] + ") " + cssPercentage + "%");
	}
	var cssString = cssStringChunks.join(", ");

	return {
		"background": "-moz-linear-gradient(left, " + cssString + ")",
		"background": "-webkit-linear-gradient(left, " + cssString + ")",
		"background": "-o-linear-gradient(left, " + cssString + ")",
		"background": "-ms-linear-gradient(left, " + cssString + ")",
		"background": "linear-gradient(to right, " + cssString + ")"
	};
}

angular
.module('beryllium')
.service('berylliumColors', [
	function() {
		return {
			DEFAULT: PLASMA,
			INFERNO: INFERNO,
			PLASMA: PLASMA,
			MISSING_VALUE_COLOR: GRAY,
			interpolate: interpolate,
			interpolateArray: interpolateArray,
            colorMapToCSSBackground: colorMapToCSSBackground
		}
	}
]);

})();
